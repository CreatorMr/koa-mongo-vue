(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["articleDetail"],{"159b":function(e,t,r){var n=r("da84"),a=r("fdbc"),i=r("17c2"),s=r("9112");for(var c in a){var o=n[c],u=o&&o.prototype;if(u&&u.forEach!==i)try{s(u,"forEach",i)}catch(l){u.forEach=i}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,a=r("a640"),i=r("ae40"),s=a("forEach"),c=i("forEach");e.exports=s&&c?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},1884:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("h3",[e._v("标签列表")]),(this.user.status="admin")?r("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")]):e._e(),r("div",{staticClass:"tag"},e._l(e.tagList,(function(t){return r("div",{key:t._id,staticClass:"tag-item"},[r("router-link",{key:t._id,staticClass:"router-link",attrs:{to:"/article?tag_id="+t._id+"&tag_name="+t.name}},[r("p",[e._v(e._s(t.name))]),r("p",[e._v("描述简介: "+e._s(t.desc))])])],1)})),0),r("el-dialog",{attrs:{title:"新增标签",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",[r("el-formItem",{attrs:{label:"名称"}},[r("el-input",{attrs:{placeholder:"名称",autocomplete:"off"},model:{value:e.tag.name,callback:function(t){e.$set(e.tag,"name",t)},expression:"tag.name"}})],1),r("el-formItem",{attrs:{label:"描述"}},[r("el-input",{attrs:{placeholder:"描述",autocomplete:"off"},model:{value:e.tag.desc,callback:function(t){e.$set(e.tag,"desc",t)},expression:"tag.desc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addTags}},[e._v("确 定")])],1)],1)],1)},a=[],i=(r("96cf"),r("1da1")),s=r("d4ec"),c=r("bee2"),o=r("262e"),u=r("2caf"),l=r("9ab4"),d=r("60a3"),f=r("4bb5"),m=r("2423"),p=function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.tagList=[],e.tag={name:"",desc:""},e.dialogVisible=!1,e}return Object(c["a"])(r,[{key:"getTagListM",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["g"])({});case 2:t=e.sent,this.tagList=t.tagsList;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.getTagListM(),console.log(this.user,"this.user"),this.user._id){e.next=5;break}return e.next=5,this.userInit();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleClose",value:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}},{key:"addTags",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["b"])(this.tag);case 2:t=e.sent,console.log(t,"tianjia"),t.success?(this.dialogVisible=!1,this.getTagListM(),this.$message.success("标签添加成功")):this.$message.error(t.message);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(d["d"]);Object(l["a"])([Object(f["b"])((function(e){return e.userInfo}))],p.prototype,"user",void 0),Object(l["a"])([Object(f["a"])("userInit")],p.prototype,"userInit",void 0),p=Object(l["a"])([d["a"]],p);var g=p,b=g,h=(r("c6d8"),r("2877")),v=Object(h["a"])(b,n,a,!1,null,"42249940",null);t["default"]=v.exports},"1eb7":function(e,t,r){},2623:function(e,t,r){"use strict";var n=r("855d"),a=r.n(n);a.a},4160:function(e,t,r){"use strict";var n=r("23e7"),a=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},4886:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("h3",[e._v("分类列表")]),r("div",{staticClass:"cate"},e._l(e.cateList,(function(t){return r("div",{key:t._id,staticClass:"cate-item"},[r("router-link",{staticClass:"router-link",attrs:{to:"/article?category_id="+t._id+"&category_name="+t.name}},[r("p",[e._v(e._s(t.name))]),r("p",[e._v("描述简介: "+e._s(t.desc))])])],1)})),0)])},a=[],i=(r("96cf"),r("1da1")),s=r("d4ec"),c=r("bee2"),o=r("262e"),u=r("2caf"),l=r("9ab4"),d=r("60a3"),f=r("2423"),m=function(e){Object(o["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.cateList=[],e.cate={name:"",desc:""},e}return Object(c["a"])(r,[{key:"getcateListM",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["d"])({});case 2:t=e.sent,this.cateList=t.cateList;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getcateListM();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(d["d"]);m=Object(l["a"])([d["a"]],m);var p=m,g=p,b=(r("9095"),r("2877")),h=Object(b["a"])(g,n,a,!1,null,"05bb04b1",null);t["default"]=h.exports},"4de4":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").filter,i=r("1dde"),s=r("ae40"),c=i("filter"),o=s("filter");n({target:"Array",proto:!0,forced:!c||!o},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"855d":function(e,t,r){},9095:function(e,t,r){"use strict";var n=r("1eb7"),a=r.n(n);a.a},a259:function(e,t,r){},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},a78e:function(e,t,r){var n,a;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(i){var s;if(n=i,a="function"===typeof n?n.call(t,r,t,e):n,void 0===a||(e.exports=a),s=!0,e.exports=i(),s=!0,!s){var c=window.Cookies,o=window.Cookies=i();o.noConflict=function(){return window.Cookies=c,o}}})((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(n){function a(){}function i(t,r,i){if("undefined"!==typeof document){i=e({path:"/"},a.defaults,i),"number"===typeof i.expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(r);/^[\{\[]/.test(s)&&(r=s)}catch(u){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var o in i)i[o]&&(c+="; "+o,!0!==i[o]&&(c+="="+i[o].split(";")[0]));return document.cookie=t+"="+r+c}}function s(e,r){if("undefined"!==typeof document){for(var a={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var c=i[s].split("="),o=c.slice(1).join("=");r||'"'!==o.charAt(0)||(o=o.slice(1,-1));try{var u=t(c[0]);if(o=(n.read||n)(o,u)||t(o),r)try{o=JSON.parse(o)}catch(l){}if(a[u]=o,e===u)break}catch(l){}}return e?a[e]:a}}return a.set=i,a.get=function(e){return s(e,!1)},a.getJSON=function(e){return s(e,!0)},a.remove=function(t,r){i(t,"",e(r,{expires:-1}))},a.defaults={},a.withConverter=r,a}return r((function(){}))}))},b64b:function(e,t,r){var n=r("23e7"),a=r("7b0b"),i=r("df75"),s=r("d039"),c=s((function(){i(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return i(a(e))}})},c6d8:function(e,t,r){"use strict";var n=r("a259"),a=r.n(n);a.a},dbb4:function(e,t,r){var n=r("23e7"),a=r("83ab"),i=r("56ef"),s=r("fc6a"),c=r("06cf"),o=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=s(e),a=c.f,u=i(n),l={},d=0;while(u.length>d)r=a(n,t=u[d++]),void 0!==r&&o(l,t,r);return l}})},e439:function(e,t,r){var n=r("23e7"),a=r("d039"),i=r("fc6a"),s=r("06cf").f,c=r("83ab"),o=a((function(){s(1)})),u=!c||o;n({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})},e8ee:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"deatil"},[(this.user.status="admin")?r("div",{staticClass:"operation"},[r("p",[e._v("admin")]),e.createStatus||e.editable?e._e():r("el-button",{attrs:{type:"text"},on:{click:e.create}},[e._v("创建")]),e.editable||e.createStatus?e._e():r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.edit(!0)}}},[e._v("编辑")]),e.editable?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.edit(!1)}}},[e._v("完成")]):e._e(),e.createStatus?r("el-button",{attrs:{type:"text"},on:{click:e.createSubmit}},[e._v("提交")]):e._e(),e.createStatus?r("el-button",{attrs:{type:"text"},on:{click:e.createBack}},[e._v("返回")]):e._e()],1):e._e(),r("div",{ref:"edit",staticClass:"edit"},[r("div",[r("div",[e._v("标题： "+e._s(e.articleDetails.title))]),r("p",{staticClass:"category"},[e._v(e._s(e.articleDetails.category.map((function(e){return e.name})).join(",")))]),r("p",{staticClass:"tag"},[e._v(e._s(e.articleDetails.tags.map((function(e){return e.name})).join(",")))])]),e.editable?r("mavon-editor",{ref:"md",attrs:{ishljs:!0},on:{imgAdd:e.$imgAdd,imgDel:e.$imgDel},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}):r("mavon-editor",{ref:"md",attrs:{ishljs:!0,subfield:!1,editable:!1,defaultOpen:"preview",toolbarsFlag:!1},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),r("div",{staticClass:"comment"},[e._v(" 评论： "),r("div",{staticClass:"addcomment"},[r("el-input",{attrs:{placeholder:"输入留言"},on:{focus:e.focus},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addComment}},[e._v("提交")])],1),e._l(e.articleDetails.comments,(function(t){return r("div",{key:t._id,staticClass:"comment-item"},[r("div",[r("img",{attrs:{src:t.avatar,alt:""}}),e._v(e._s(t.user_name)+" ")]),r("div",[e._v("内容： "+e._s(t.content)+" 时间："+e._s(t.create_time))])])})),r("p",[e._v("当前只支持留言，后续再开发 评论回复等交互")])],2)],1),r("div",{ref:"create",staticClass:"create"},[r("h1",[e._v("新建文章")]),r("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"文章描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("el-form-item",{attrs:{label:"选择分类",prop:"category"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择活动区域"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.cateList,(function(t){return r("el-option",{key:t._id,attrs:{value:t._id,label:t.name}},[e._v(e._s(t.name))])})),1)],1),r("el-form-item",{attrs:{label:"选择标签",prop:"tags"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择活动区域"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.tagList,(function(t){return r("el-option",{key:t._id,attrs:{value:t._id,label:t.name}},[e._v(e._s(t.name))])})),1)],1)],1),e.createStatus?r("mavon-editor",{ref:"md",attrs:{ishljs:!0},on:{imgAdd:e.$imgAdd,imgDel:e.$imgDel},model:{value:e.newContent,callback:function(t){e.newContent=t},expression:"newContent"}}):e._e()],1),r("RegisterLogin",{attrs:{handleFlag:e.handleFlag,visible:e.visibleLogin},on:{"update:handleFlag":function(t){e.handleFlag=t},"update:handle-flag":function(t){e.handleFlag=t},cancel:function(t){e.visibleLogin=!1},ok:function(t){return e.visibleLogin=t}}})],1)},a=[];r("b0c0"),r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("96cf");var o=r("1da1"),u=r("d4ec"),l=r("bee2"),d=r("262e"),f=r("2caf"),m=r("9ab4"),p=r("60a3"),g=r("4bb5"),b=r("c1fb"),h=function(e){return Object(b["a"])("/api/uploadImg/uploadImg",{method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})},v=r("2423"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"登录",visible:e.dialogVisible},on:{close:e.cancel}},[r("el-form",[r("el-formItem",{attrs:{label:"邮箱"}},[r("el-input",{attrs:{placeholder:"邮箱",autocomplete:"off"},model:{value:e.params.email,callback:function(t){e.$set(e.params,"email",t)},expression:"params.email"}})],1),r("el-formItem",{attrs:{label:"密码"}},[r("el-input",{attrs:{type:"password",placeholder:"密码",autocomplete:"off"},model:{value:e.params.password,callback:function(t){e.$set(e.params,"password",t)},expression:"params.password"}})],1),"register"===e.handleFlag?r("el-formItem",{attrs:{label:"昵称"}},[r("el-input",{attrs:{placeholder:"用户名或昵称",autocomplete:"off"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["login"===e.handleFlag?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.forget(0)}}},[e._v("还没有账号")]):e._e(),"register"===e.handleFlag?r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.forget(1)}}},[e._v("返回登录")]):e._e(),"login"===e.handleFlag?r("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:function(t){return e.handleOk("login")}}},[e._v("登 录")]):e._e(),"register"===e.handleFlag?r("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:function(t){return e.handleOk("register")}}},[e._v("注 册")]):e._e()],1)],1)},y=[],_=r("c24f"),O=r("a78e"),w=r.n(O),j=function(e){Object(d["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;return Object(u["a"])(this,r),e=t.apply(this,arguments),e.btnLoading=!1,e.loading=!1,e.params={email:"creator@creator.com",password:"admin",name:""},e}return Object(l["a"])(r,[{key:"mounted",value:function(){}},{key:"forget",value:function(e){e?this.$emit("update:handleFlag","login"):this.$emit("update:handleFlag","register")}},{key:"handleOk",value:function(e){this.submit()}},{key:"cancel",value:function(){return!1}},{key:"submit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="",this.btnLoading=!0,"register"!==this.handleFlag){e.next=12;break}return e.next=5,Object(_["c"])(this.params);case 5:if(t=e.sent,t.ok){e.next=9;break}return this.$message.info(t.message),e.abrupt("return");case 9:this.$emit("update:handleFlag","login"),e.next=24;break;case 12:return delete this.params.name,e.next=15,Object(_["b"])(this.params);case 15:if(t=e.sent,t.ok){e.next=19;break}return this.$message.info(t.message),e.abrupt("return");case 19:r={_id:t.user._id,name:t.user.nick_name,avatar:t.user.avatar},w.a.set("jwtToken-creator",t.token,{domain:"localhost",expires:7}),this.$store.commit("userInfoInit",r),window.sessionStorage.userInfo=JSON.stringify(r),this.$emit("ok",!1);case 24:this.btnLoading=!1,this.$message({message:"操作成功",type:"success"});case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"dialogVisible",get:function(){return this.visible}}]),r}(p["d"]);Object(m["a"])([Object(p["c"])({default:!1})],j.prototype,"visible",void 0),Object(m["a"])([Object(p["c"])({default:!1})],j.prototype,"handleFlag",void 0),Object(m["a"])([Object(g["a"])("userInit")],j.prototype,"userInit",void 0),Object(m["a"])([Object(p["b"])()],j.prototype,"cancel",null),j=Object(m["a"])([Object(p["a"])({})],j);var x=j,$=x,L=r("2877"),C=Object(L["a"])($,k,y,!1,null,null,null),R=C.exports,D=function(e){Object(d["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;return Object(u["a"])(this,r),e=t.apply(this,arguments),e.cateList=[],e.tagList=[],e.rules={title:[{required:!0,message:"请输入文章名称",trigger:"blur"}],desc:[{required:!0,message:"请输入文章描述",trigger:"blur"}],category:[{required:!0,message:"请选择分类",trigger:"change"}],tags:[{required:!0,message:"请选择标签",trigger:"change"}]},e.articleDetails={_id:"",content:"",comments:[],tags:[],category:[]},e.form={title:"",desc:"",content:"",category:[],tags:[]},e.comment="",e.handleFlag="login",e.content="",e.newContent="",e.status="preview",e.editable=!1,e.createStatus=!1,e.img_file=[],e.visibleLogin=!1,e}return Object(l["a"])(r,[{key:"mounted",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.getArticleDetail(),e.next=3,Object(v["d"])({});case 3:return t=e.sent,this.cateList=t.cateList,e.next=7,Object(v["g"])({});case 7:r=e.sent,this.tagList=r.tagsList;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getArticleDetail",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,console.log(this.$route.query,"this.$route.query"),r=t||this.$route.query,e.next=5,Object(v["f"])(r);case 5:n=e.sent,this.articleDetails=n.data,this.content=this.articleDetails.content;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"create",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.createStatus=!this.createStatus,this.$refs["edit"].classList.add("editHidden"),this.$refs["create"].classList.add("editBlock"),this.$refs["edit"].classList.remove("editBlock"),this.$refs["create"].classList.remove("editHidden"),this.$nextTick((function(e){window.scrollTo(0,0)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createSubmit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["ruleForm"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=19;break}return n=c({},t.form,{author:t.user.nick_name,content:t.newContent}),e.next=4,Object(v["c"])(n);case 4:if(a=e.sent,!a.ok){e.next=15;break}t.createStatus=!t.createStatus,t.$refs["create"].classList.add("editHidden"),t.$refs["edit"].classList.add("editBlock"),t.$refs["create"].classList.remove("editBlock"),t.$refs["edit"].classList.remove("editHidden"),t.$nextTick((function(e){window.scrollTo(0,0)})),t.getArticleDetail({articleId:a.artList._id}),e.next=17;break;case 15:return t.$message.error(a.message),e.abrupt("return");case 17:e.next=21;break;case 19:return console.log("error submit!!"),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createBack",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.createStatus=!this.createStatus,this.$refs["create"].classList.add("editHidden"),this.$refs["edit"].classList.add("editBlock"),this.$refs["create"].classList.remove("editBlock"),this.$refs["edit"].classList.remove("editHidden"),this.$nextTick((function(e){window.scrollTo(0,0)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addComment",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["a"])({article_id:this.articleDetails._id,content:this.comment,user_name:this.user.name});case 2:if(t=e.sent,!t.ok){e.next=10;break}return e.next=6,Object(v["e"])({_id:this.articleDetails._id});case 6:r=e.sent,console.log(r," 品论列表"),this.articleDetails.comments=r,this.comment="";case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"edit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.editable=t,t){e.next=5;break}return e.next=4,Object(v["h"])(c({article_id:this.articleDetails._id},this.articleDetails,{content:this.content}));case 4:e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"$imgAdd",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new FormData,n.append("image",r),this.img_file[t]=r,e.next=5,h(n);case 5:a=e.sent,a.data;case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"$imgDel",value:function(e){delete this.img_file[e]}},{key:"focus",value:function(){this.user._id||(this.visibleLogin=!0)}},{key:"preview",get:function(){return this.status}}]),r}(p["d"]);Object(m["a"])([Object(g["b"])((function(e){return e.userInfo}))],D.prototype,"user",void 0),D=Object(m["a"])([Object(p["a"])({components:{RegisterLogin:R}})],D);var S=D,I=S,F=(r("2623"),Object(L["a"])(I,n,a,!1,null,"6b41e700",null));t["default"]=F.exports}}]);